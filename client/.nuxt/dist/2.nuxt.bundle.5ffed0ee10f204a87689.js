webpackJsonp([2],{144:function(t,e,a){a(257);var s=a(13)(a(209),a(236),"data-v-0c690a7c",null);t.exports=s.exports},148:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ipDomain="http://diplomServer/",e.clientId=2,e.clientSecret="zuwZjwP2whDqGYytR3WYfXhaV3B19clL0QYLsGQi",e.getHeader=function(){var t=JSON.parse(window.localStorage.getItem("authUser")),e=null;return null!==t&&(e={Accept:"application/json",Authorization:"Bearer "+t.access_token}),e}},209:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(148);e.default={data:function(){return{auth:{reg:!1},errors:{login:!1,register:!1},user:{name:"",password:"",password_confirmation:"",login:""},data:{login:"",password:""},preload:!1}},methods:{register:function(){var t=this;if(this.$validatores6.make(this.user,{"name.имя":"required","password.пароль":"required","login.логин":"required"}),this.$validatores6.fails())return void(this.errors.register=this.$validatores6.getError);this.errors.register=!1,this.preload=!0,this.$http.post(s.ipDomain+"api/register",this.user).then(function(e){200===e.status&&(t.auth.reg=!1,t.preload=!1)},function(e){400===e.status&&(t.errors.register=e.data,t.preload=!1)})},logined:function(){var t=this;this.preload=!0;var e={grant_type:"password",client_id:s.clientId,client_secret:s.clientSecret,username:this.data.login,password:this.data.password,scope:""},a={};this.$http.post(s.ipDomain+"oauth/token",e).then(function(e){200===e.status&&(a.access_token=e.data.access_token,a.refresh_token=e.data.refresh_token,t.$storage.add("authUser",a),t.$http.get(s.ipDomain+"api/user",{headers:(0,s.getHeader)()}).then(function(e){t.preload=!1,a.data=e.data,t.$storage.add("authUser",a),t.$store.commit("userStore/SET_AUTH_USER",a),t.$router.push({name:"index"})}))},function(e){401===e.status&&(t.errors.login=!0,t.preload=!1)})}}}},214:function(t,e,a){e=t.exports=a(40)(void 0),e.push([t.i,".slide-fade-enter-active[data-v-0c690a7c]{transition:all .3s ease}.slide-fade-leave-active[data-v-0c690a7c]{transition:all .8s cubic-bezier(1,.5,.8,1)}.slide-fade-enter[data-v-0c690a7c],.slide-fade-leave-to[data-v-0c690a7c]{-ms-transform:translateX(400px);transform:translateX(400px);opacity:0}",""])},236:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"auth"},[a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.auth.reg,expression:"!auth.reg"}],staticClass:"modal"},[a("form",{attrs:{action:""}},[a("span",{on:{click:function(e){t.auth.reg=!0}}},[t._v("Нету аккаунта?")]),a("nuxt-link",{attrs:{to:{name:"index"}}},[t._v("На главную")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.login,expression:"errors.login"}],staticClass:"alert bg-danger text-danger"},[t._v("\n\t\t\t\t\t\tНе верный логин или пароль\n\t\t\t\t\t")]),a("h4",[t._v("Вход в аккаунт")]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Логин")]),a("i",{staticClass:"fa fa-user"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.login,expression:"data.login"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.data.login},on:{input:function(e){e.target.composing||(t.data.login=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Пароль")]),a("i",{staticClass:"fa fa-lock"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.password,expression:"data.password"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.data.password},on:{input:function(e){e.target.composing||(t.data.password=e.target.value)}}})]),a("input",{staticClass:"btn btn-primary form-control",attrs:{type:"button",value:"войти"},on:{click:t.logined}})],1)])]),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.auth.reg,expression:"auth.reg"}],staticClass:"modal"},[a("form",{attrs:{action:""}},[a("span",{on:{click:function(e){t.auth.reg=!1}}},[t._v("Есть аккаунт?")]),t.errors.register?a("div",{staticClass:"alert bg-danger text-danger"},[a("ul",t._l(t.errors.register,function(e){return a("li",[t._v(t._s(e))])}))]):t._e(),a("h4",[t._v("Регистрация")]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Логин")]),a("i",{staticClass:"fa fa-user"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.login,expression:"user.login"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.login},on:{input:function(e){e.target.composing||(t.user.login=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Имя")]),a("i",{staticClass:"fa fa-lock"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||(t.user.name=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Пароль")]),a("i",{staticClass:"fa fa-lock"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||(t.user.password=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Повторите пароль")]),a("i",{staticClass:"fa fa-lock"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password_confirmation,expression:"user.password_confirmation"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.password_confirmation},on:{input:function(e){e.target.composing||(t.user.password_confirmation=e.target.value)}}})]),a("input",{staticClass:"btn btn-primary form-control",attrs:{type:"button",value:"войти"},on:{click:t.register}})])])]),t._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.preload,expression:"preload"}],staticClass:"preloader"})],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"company text-center"},[a("img",{attrs:{src:"img/banner.png",alt:""}}),t._v(" ROSGOSSTRAH COMPANY\n\t\t")])}]}},257:function(t,e,a){var s=a(214);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(41)("fefb5030",s,!0)}});